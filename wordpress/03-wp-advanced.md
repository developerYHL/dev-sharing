## 관리자 페이지 코딩하기

### 기획

일단 책에 들어가는 정보는 아래와 같다.

* 제목
* 저자
* 저자 소개
* 번역자
* 가격
* 출간일
* 페이지수
* 책 소개
* 목차
* 출력 순서
* 새로 나온 책 여부
* 추천 책 여부
* 주제 분류
* 함께 읽을 책
* 표지 이미지

하드코딩을 하면 쉽겠지만, 워드프레스에서 이 정보들을 모두 입력할 수 있도록 만드는 건 일단 답답하게 느껴진다. 해 본 적이 없고, 무엇보다 이미 있는 틀 안에 끼워 넣어야 하는 거니까 그렇게 느껴 지는 것이다. 아마도 다들 그럴 텐데, 자신이 처음부터 작성하는 코드가 남이 짠 코드를 수정하는 것보다 마음이 편하다. 워드프레스가 아무리 훌륭한 CMS라고 해도 어쨌든 남이 만든 코드에 내 코드를 끼워 넣는 것이니, 아주아주 익숙해지기 전까지는 약간의 불편함을 갖고 작업해야 하는 것 같다.

워드프레스로 이런 정보들을 넣을 때 분명한 장점도 있다. 목록 페이지를 따로 만들지 않아도 된다. 페이징 처리도 따로 할 필요 없다. 기본적인 검색도 기본으로 제공된다. DB 테이블을 설계할 필요도 없다. 개발자는 오로지 입력/수정 화면 구성과 DB 입출력 부분만 신경을 쓰면 그만이다. 이게 CMS의 장점이다.

이제 위에서 나열한 각 정보를 어떻게 처리할지 생각해 보자.

* 출력 순서, 가격, 출간일, 페이지수, 책 소개, 목차, 함께 읽을 책 : 이것들은 별다른 고민 없이 custom field로 처리할 수 있는 놈들이다.
* 저자, 번역자, 추천 책 여부, 주제 분류 : custom taxonomy로 처리하는 게 제격이다.
* 새로 나온 책 여부 : 새로 나온 책의 경우 수동으로 조정하게 될 여지가 많다. 엄청나게 커서 눈코뜰 새 없이 새 책이 쏟아져 나오는 출판사의 경우 특정 기간을 정해 자동으로 처리하는 게 나을 수도 있다. 하지만 작은 출판사의 경우에는 새로 나온 책의 목록에 포함해 두는 게 들쭉날쭉일 수 있다. 어떤 때는 신간이 한 권만 나온 채 반 년이 흐를 수도 있고, 어떤 때는 신간이 한꺼번에 3~4권씩 나올 수도 있기 때문이다. 그래서 굳이 '새로 나온 책 여부'라는 항목이 필요하고, 이건 그러면 custom taxonomy로 처리하면 되겠다.
* 저자 소개 : 저자를 custom taxonomy로 처리하니, 저자 소개는 custom taxonomy의 설명으로 넣어야 하나 하는 고민이 들 수 있겠다. (카테고리나 태그 메뉴에 가 보면 '설명'이라는 입력 항목을 볼 수 있다.) 그러나 같은 저자라 해도 모든 책에서 소개가 같은 게 아니다. 따라서 저자의 소개는 저자에 종속적인 게 아니라 책에 종속적이다. 그러므로 저자 소개는 저자의 설명 항목으로 처리하지 않고, 책의 custom field로 처리한다. 

#### custom taxonomy를 사용할 때 장점

위 항목중, '새로 나온 책 여부'와 '추천 책 여부'는 custom field로 처리해도 무방하다. 내가 custom taxonomy로 처리한 이유는 클라이언트 단에서 처리하기 더 편하기 때문이다. custom taxonomy로 처리하면 `http://domain.com/?new_book=y`라는 도메인 접근만으로 새로 나온 책의 목록을 볼 수 있다. 그러나 custom field로 처리하면 페이지를 만들고 따로 코딩을 해 줘야 한다. 저자나 번역자, 주제 분류에서도 custom taxonomy로 간단하게 목록을 가져올 수 있다. 

이 목록을 표시하는 데 사용하는 테마의 파일과 우선순위는 아래와 같다. ([[워드프레스] 테마에서 템플릿 파일 매칭 순서](http://mytory.net/archives/10119) 참고)

    taxonomy-[tax]-[term].php → taxonomy-[tax].php → taxonomy.php → archive.php → index.php

`tax`는 taxonomy의 slug를 말하는 것이고, term은 taxonomy의 구체적 내용의 slug를 말하는 것이다. 예컨대, `author`라는 taxonomy가 있고, 이 아래 알렉스 캘리니코스라는 author가 있다고 하자. 이 author의 slug는 `alex-callinicos`다. 알렉스만을 위한 페이지를 만들려면 `taxonomy-author-alex-callinicos.php`라는 파일을 만들면 된다. 물론 그럴 일은 많지 않을 것이다. 보통은 `taxonomy-author.php`만 만들면 될 것이다. 그러나 사실 그것까지도 필요 없다. 이 사이트의 경우 책 목록은 모두 같으므로 그냥 `archive.php`를 잘 만들면 된다.

